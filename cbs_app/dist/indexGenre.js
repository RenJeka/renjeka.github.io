!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.tableWorker={fillTable:function(e,t,n){if(null==n&&(n=this.whatObjectKey(e,0)),"string"!=typeof t)if("object"!=(void 0===t?"undefined":r(t)));else for(var o=0;o<t.length;o++)this.addInfoInRow(e,this.addRow(e).rowIndex,arrayofData[o]);else{var a=this.getTableData(t,n);if(0==a)return!1;for(var i=0;i<a.length;i++)this.addInfoInRow(e,this.addRow(e).rowIndex,a[i])}},getTableData:function(e,t){if(localStorage.getItem(e)){var n=window.localStorage.getItem(e);if((n=JSON.parse(n)).some((function(e){return e.hasOwnProperty(t)})))return n.sort((function(e,n){return e[t]>n[t]?1:e[t]==n[t]?0:e[t]<n[t]?-1:void 0})),n;throw"Ключ, переданный для сортировки — не верный. Такого свойства у объекта нет."}return!1},addRow:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments[3],o=[];function a(a){for(var i=0;i<n;i++){var l=document.createElement("tr");e.appendChild(l);for(var u=0;u<r;u++){var c=document.createElement("td");l.appendChild(c)}o.push(l),t&&a.addInfoInRow(e,l.rowIndex,t)}return o}if(null==r&&(r=e.rows[0].cells.length),1==n){var i=a(this);return i[0]}return a(this)},addInfoInRow:function(e,t,n){for(var r=0;r<e.rows[t].cells.length;r++)this.addInfoInCell(e,n,t,r)},addInfoInCell:function(e,t,n,r){for(var o in t)t.hasOwnProperty(o)&&o.toLowerCase()===this.whatObjectKey(e,r).toLowerCase()&&(e.rows[n].cells[r].innerHTML=t[o])},whatObjectKey:function(e,t){return e.rows[0].cells[t].dataset.objectKeyBind},cleanTable:function(e){for(;e.rows.length>1;)e.deleteRow(e.rows.length-1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$=function(e){return document.querySelector(e)},t.tag=function(e){return document.getElementsByTagName(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formHandler=void 0;n(1);var r=n(3),o=n(4),a=n(0);t.formHandler={addBookHandler:function(e){var t=e.target.form,n=t.elements;if(0==this.validate(n))return!1;var a=this.getObjectType(t),i=void 0,l=a.localStorageKey;switch(a.objtype){case"book":i=new r.Book;break;case"author":i=new o.Author;break;case"genre":i=new o.Genre}return this.fillObject(i,n,l),!this.findDublicate(i,l,"idd")&&(this.cleanInput(t),this.addToLocalStorage(i,l),{localStorageKey:l,addedObject:i})},fillObject:function(e,t,n){e.idd=this.getID(n,"idd");for(var r=0;r<t.length;r++)0==t[r].hasAttribute("ignore")&&(e[t[r].getAttribute("id")]=t[r].value);return e},cleanInput:function(e){for(var t=0;t<e.elements.length;t++)"hidden"!=e.elements[t].type&&"button"!=e.elements[t].localName&&(e.elements[t].value="",e.elements[t].className="bookInputs-clean")},getObjectType:function(e){for(var t=0;t<e.elements.length;t++)if("objtype"==e.elements[t].id)return{objtype:e.elements[t].value,localStorageKey:e.elements[t].dataset.localStorageKey};throw"Не найдено поле ввода  <input type='hidden'> с указанием типа объекта, который будет передан в базу данный. Добавьте в вашу форму поле <input type='hidden' id='objtype' value=''>  В поле value='' укажите тип объекта, который будет добавлен в базу данных"},findDublicate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"idd",r=a.tableWorker.getTableData(t);if(0==r)return!1;var o=r.some((function(t){return t[n]==e[n]}));return o&&alert("такая запись уже есть"),o},validate:function(e){for(var t=0,n=0;n<e.length;n++)"button"!=e[n].localName&&(0==e[n].value.length?(e[n].className="bookInputs-invalid",t++):e[n].className="bookInputs-valid");return!(t>0)},addToLocalStorage:function(e,t){var n=void 0,r=localStorage.getItem(t),o=[];return r?((n=JSON.parse(r)).push(e),r=JSON.stringify(n),void localStorage.setItem(t,r)):(o.push(e),void window.localStorage.setItem(t,JSON.stringify(o)))},getID:function(e,t){var n=a.tableWorker.getTableData(e),r=0;return n?(n.forEach((function(e){parseInt(e[t])>r&&(r=parseInt(e[t]))})),r+1):1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Book=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t.bookLibrary=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Genre=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}},,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(2);window.addEventListener("load",(function(){var e=(0,o.$)("#table-genres");r.tableWorker.fillTable(e,"Genres-Library"),(0,o.$)("#add").addEventListener("click",(function(t){var n=a.formHandler.addBookHandler(t);if(0==n)return!1;r.tableWorker.addRow(e,n.addedObject)}))}))}]);
//# sourceMappingURL=indexGenre.js.map