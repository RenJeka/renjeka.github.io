!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.tableWorker={fillTable:function(e,t){if("string"!=typeof t)if("object"!=(void 0===t?"undefined":r(t)));else for(var n=0;n<t.length;n++)this.addInfoInRow(e,this.addRow(e).rowIndex,arrayofData[n]);else{if(!1===this.getTableData(t))return!1;for(var o=this.getTableData(t),a=0;a<o.length;a++)this.addInfoInRow(e,this.addRow(e).rowIndex,o[a])}},getTableData:function(e){if(localStorage.getItem(e)){var t=window.localStorage.getItem(e);return JSON.parse(t)}return!1},addRow:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments[3];console.log(this);var o=[];function a(a){for(var l=0;l<n;l++){var i=document.createElement("tr");e.appendChild(i);for(var u=0;u<r;u++){var d=document.createElement("td");i.appendChild(d)}o.push(i),t&&a.addInfoInRow(e,i.rowIndex,t)}return o}if(null==r&&(r=e.rows[0].cells.length),1==n){var l=a(this);return l[0]}return a(this)},addInfoInRow:function(e,t,n){for(var r=0;r<e.rows[t].cells.length;r++)this.addInfoInCell(e,n,t,r)},addInfoInCell:function(e,t,n,r){for(var o in t)t.hasOwnProperty(o)&&o.toLowerCase()===this.whatObjectKey(e,r).toLowerCase()&&(e.rows[n].cells[r].innerHTML=t[o])},whatObjectKey:function(e,t){return e.rows[0].cells[t].dataset.objectKeyBind}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$=function(e){return document.querySelector(e)}},function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(3);window.addEventListener("load",(function(){var e=(0,o.$)("#table-books");console.dir(e),r.tableWorker.fillTable(e,"Book-Library"),(0,o.$)("#add").addEventListener("click",(function(t){var n=a.formHandler.addBookHandler(t);if(0==n)return!1;r.tableWorker.addRow(e,n.addedObject)})),o.$}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formHandler=void 0;n(1);var r=n(4),o=n(0);t.formHandler={addBookHandler:function(e){var t=e.target.form,n=t.elements;if(0==this.validate(n))return!1;var o=this.getObjectType(t),a=void 0,l=o.localStorageKey;switch(o.objtype){case"book":a=new r.Book;break;case"author":a=new Author}return this.fillObject(a,n,l),!this.findDublicate(a,l)&&(this.cleanInput(t),this.addToLocalStorage(a,l),{localStorageKey:l,addedObject:a})},fillObject:function(e,t,n){e.idd=this.getID(n,"idd");for(var r=0;r<t.length;r++)e[t[r].getAttribute("id")]=t[r].value;return e},cleanInput:function(e){for(var t=0;t<e.elements.length;t++)"hidden"!=e.elements[t].type&&"button"!=e.elements[t].localName&&(e.elements[t].value="",e.elements[t].className="inputs-clean")},getObjectType:function(e){for(var t=0;t<e.elements.length;t++)if("objtype"==e.elements[t].id)return{objtype:e.elements[t].value,localStorageKey:e.elements[t].dataset.localStorageKey};throw"Не найдено поле ввода  <input type='hidden'> с указанием типа объекта, который будет передан в базу данный. Добавьте в вашу форму поле <input type='hidden' id='objtype' value=''>  В поле value='' укажите тип объекта, который будет добавлен в базу данных"},findDublicate:function(e,t){var n=o.tableWorker.getTableData(t);if(0==n)return!1;var r=n.some((function(t){return t.id==e.id}));return r&&alert("такая запись уже есть"),r},validate:function(e){for(var t=0,n=0;n<e.length;n++)"button"!=e[n].localName&&(0==e[n].value.length?(e[n].className="inputs-invalid",t++):e[n].className="inputs-valid");return!(t>0)},addToLocalStorage:function(e,t){var n=void 0,r=localStorage.getItem(t),o=[];return r?((n=JSON.parse(r)).push(e),r=JSON.stringify(n),void localStorage.setItem(t,r)):(o.push(e),void window.localStorage.setItem(t,JSON.stringify(o)))},getID:function(e,t){var n=o.tableWorker.getTableData(e),r=0;return n?(n.forEach((function(e){parseInt(e[t])>r&&(r=parseInt(e[t]))})),r+1):1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Book=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t.bookLibrary=[]}]);
//# sourceMappingURL=main.js.map