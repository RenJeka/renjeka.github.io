!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.tableWorker={fillTable:function(e,t,n){if(null==n&&(n=this.whatObjectKey(e,0)),"string"!=typeof t)if("object"!=(void 0===t?"undefined":o(t)));else for(var r=0;r<t.length;r++)this.addInfoInRow(e,this.addRow(e).rowIndex,arrayofData[r]);else{var a=this.getTableData(t,n);if(0==a)return!1;for(var l=0;l<a.length;l++)this.addInfoInRow(e,this.addRow(e).rowIndex,a[l])}},getTableData:function(e,t){if(localStorage.getItem(e)){var n=window.localStorage.getItem(e);if((n=JSON.parse(n)).some((function(e){return e.hasOwnProperty(t)})))return n.sort((function(e,n){return e[t]>n[t]?1:e[t]==n[t]?0:e[t]<n[t]?-1:void 0})),n;throw"Ключ, переданный для сортировки — не верный. Такого свойства у объекта нет."}return!1},addRow:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments[3],r=[];function a(a){for(var l=0;l<n;l++){var i=document.createElement("tr");e.appendChild(i);for(var u=0;u<o;u++){var c=document.createElement("td");i.appendChild(c)}r.push(i),t&&a.addInfoInRow(e,i.rowIndex,t)}return r}if(null==o&&(o=e.rows[0].cells.length),1==n){var l=a(this);return l[0]}return a(this)},addInfoInRow:function(e,t,n){for(var o=0;o<e.rows[t].cells.length;o++)this.addInfoInCell(e,n,t,o)},addInfoInCell:function(e,t,n,o){for(var r in t)t.hasOwnProperty(r)&&r.toLowerCase()===this.whatObjectKey(e,o).toLowerCase()&&(e.rows[n].cells[o].innerHTML=t[r])},whatObjectKey:function(e,t){return e.rows[0].cells[t].dataset.objectKeyBind},cleanTable:function(e){for(;e.rows.length>1;)e.deleteRow(e.rows.length-1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$=function(e){return document.querySelector(e)},t.tag=function(e){return document.getElementsByTagName(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formHandler=void 0;n(1);var o=n(3),r=n(4),a=n(0);t.formHandler={addBookHandler:function(e){var t=e.target.form,n=t.elements;if(0==this.validate(n))return!1;var a=this.getObjectType(t),l=void 0,i=a.localStorageKey;switch(a.objtype){case"book":l=new o.Book;break;case"author":l=new r.Author;break;case"genre":l=new r.Genre}return this.fillObject(l,n,i),!this.findDublicate(l,i,"idd")&&(this.cleanInput(t),this.addToLocalStorage(l,i),{localStorageKey:i,addedObject:l})},fillObject:function(e,t,n){e.idd=this.getID(n,"idd");for(var o=0;o<t.length;o++)0==t[o].hasAttribute("ignore")&&(e[t[o].getAttribute("id")]=t[o].value);return e},cleanInput:function(e){for(var t=0;t<e.elements.length;t++)"hidden"!=e.elements[t].type&&"button"!=e.elements[t].localName&&(e.elements[t].value="",e.elements[t].className="bookInputs-clean")},getObjectType:function(e){for(var t=0;t<e.elements.length;t++)if("objtype"==e.elements[t].id)return{objtype:e.elements[t].value,localStorageKey:e.elements[t].dataset.localStorageKey};throw"Не найдено поле ввода  <input type='hidden'> с указанием типа объекта, который будет передан в базу данный. Добавьте в вашу форму поле <input type='hidden' id='objtype' value=''>  В поле value='' укажите тип объекта, который будет добавлен в базу данных"},findDublicate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"idd",o=a.tableWorker.getTableData(t);if(0==o)return!1;var r=o.some((function(t){return t[n]==e[n]}));return r&&alert("такая запись уже есть"),r},validate:function(e){for(var t=0,n=0;n<e.length;n++)"button"!=e[n].localName&&(0==e[n].value.length?(e[n].className="bookInputs-invalid",t++):e[n].className="bookInputs-valid");return!(t>0)},addToLocalStorage:function(e,t){var n=void 0,o=localStorage.getItem(t),r=[];return o?((n=JSON.parse(o)).push(e),o=JSON.stringify(n),void localStorage.setItem(t,o)):(r.push(e),void window.localStorage.setItem(t,JSON.stringify(r)))},getID:function(e,t){var n=a.tableWorker.getTableData(e),o=0;return n?(n.forEach((function(e){parseInt(e[t])>o&&(o=parseInt(e[t]))})),o+1):1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Book=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t.bookLibrary=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Genre=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}},function(e,t,n){"use strict";var o=n(0),r=n(1),a=n(2);window.addEventListener("load",(function(){console.dir(document.forms[0]),console.dir(document.forms[0].elements);for(var e=(0,r.$)(".myTable1"),t=void 0,n=0;n<document.forms[0].elements.length;n++)document.forms[0].elements[n].dataset.hasOwnProperty("localStorageKey")&&(t=document.forms[0].elements[n].dataset.localStorageKey);o.tableWorker.fillTable(e,t),(0,r.$)("#addBook").addEventListener("click",(function(t){var n=a.formHandler.addBookHandler(t);if(0==n)return!1;o.tableWorker.addRow(e,n.addedObject)}));for(var l=0;l<e.rows.length;l++)e.rows[l].addEventListener("click",(function(t){0==this.rowIndex&&(o.tableWorker.cleanTable(e),o.tableWorker.fillTable(e,"Book-Library",t.target.dataset.objectKeyBind)),console.log("Индекс строки =  "+this.rowIndex)}))}))}]);
//# sourceMappingURL=index.js.map