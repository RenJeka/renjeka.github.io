# Проект для Программы получения опыта по специальности Front-end.

Проект представляет собой клиентское одностраничное приложение, которое будет предоставлять возможность манипулировать данными связанными с авторами и их книгами.


Задание и требования к проекту. — https://docs.google.com/document/d/17adht2tx0aTk0XtPRyxR6FLzRGDCzhum1hw2ua5RN0I/edit

### СТРУКТУРА ПРИЛОЖЕНИЯ

Приложение маннипулирует данными, которые разделяются на 3 категории: Книги, Авторы, Жанры.
Каждая категория представлена в виде таблицы с формой для её заполнения. 
Для работы приложения исходные .js - файлы разделены по такому принципу:

♦ index.js — Файл, с которого начинается работа приложения

♦ tableWorker.js — Файл, в котором находятся методы для работы с таблицой (заполнение таблицы, добавление строк, вычисление ключей для привязки данных, получение данных с базы данных (LocalStarage) и.т.д)

♦ tableWorker.js — Файл, который отвечает за принятия данных с формы (полей ввода), их обработку и запись в базу данных (LocalStarage)

♦ Для каждого объекта существует отдельный класс в виде файла ".js" 
books.js — класс для создания объекта "Книга"
author.js — класс для создания объекта "Автор"
genre.js — класс для создания объекта "Жанр"

♦ myHelperLib.js — вспомагательная библиотека для вспомогательных функций (вместо подключения jQuery)

### РАБОТА ПРИЛОЖЕНИЯ

При открытии страницы с данными, на событие загрузки окна методы из "tableWorker.js" берут раннее введенные данные и встравляют их в ячейки таблицы. Для работы таблицы нужно в заголовочной ячейке <th> вставить атрибут "data-object-key-bind" со значением ключа объекта в базе данных.

При введении данных в поля ввода и нажатии на кнопку "Добавить" методы из "tableWorker.js" обрабатывают в такой последовательности
1. Проверка валидации
2. Определение типа объекта. Обязательное условие — добавление следующего тега для метаданных в каждую форму:
		<input type="hidden" id="objtype" value="book" data-local-storage-key="Book-Library">
		value — тип объекта, который обрабатывается соответсвующим классом в исходных .js - файлах
Подразумевается, что каждая форма заполняет только 1 объект (объект 1-го типа). Ключ для LocalStorage создается автоматически (значение поля 'value' + строка '-library' )

3. Заполнение объекта. 
4. Проверка на дублированние (проверка осуществляется по полю "id")
5. Очистка введенных полей.
6. Добавление объекта в базу данных.


### СОЗДАНИЕ НОВОЙ ТАБЛИЦЫ

Предполагается, что таблица будет создаваться как отдельный модуль (отдельная html-страница и отдельный файл-обработчик), на который пользователь будет ссылаться с основного файла "index.html"
Для создания новой таблици необходимо:

- Создать новый файл .html в директории src/pages
- Задать ссылку на новый .html с файла index.html
- Создать отдельный файл-обработчик для новой таблицы в папке ./src с именем index<Ваше Название>.js (напр. indexMytable.js)
- создать отдельный клас (что будет представлять таблица) в папке ./src с именем <Ваше Название>.class.js (напр. Mytable.class.js)
- Подключить импорт класса в файле "formHandler.js"
- Создать экземпляр объекта в конструкции switch (currentObject.objtype) (файл "formHandler.js")
-

- Создать форму в html-файле, добавив в форму поле с метаданными <input type="hidden" ...> 
	- Название ключа для массива объектов (в базе данных) устанавливается в атрибут "data-local-storage-key"
	- Тип объекта устанавливается в атрибут "value"
	- Значение атрибута "id" у каждого поля 'input' -- это название свойства объекта в базе данных.
	- Если не нужно, чтобы значение 'value' у поля 'input' попало в заполняемый объект -- необходимо добавить атрибут 'ignore'
	
- Создать саму таблицу в html-файле
	- Каждое свойство объекта создается через <th>. В атрибут "data-object-key-bind" указывается название поля объекта, по которому в данный столбец будут выводится значения.
	- Если есть элементы в форме, значения которых не должно попасть в объект в базу данных -- добавляем в него атрибут 'ignore'


 


