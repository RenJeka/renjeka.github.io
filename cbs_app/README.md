# Проект для Программы получения опыта по специальности Front-end.

Проект представляет собой клиентское одностраничное приложение, которое будет предоставлять возможность манипулировать данными связанными с авторами и их книгами.


Задание и требования к проекту. — https://docs.google.com/document/d/17adht2tx0aTk0XtPRyxR6FLzRGDCzhum1hw2ua5RN0I/edit

### СТРУКТУРА ПРИЛОЖЕНИЯ

	Приложение создавалось при помощи Webpack 4-й версии. 
	Приложение имеет 3 (три) точки входа (index.js, indexAuthor.js и indexGenre.js), и 3 (три) бандла.

	Приложение маннипулирует данными, которые разделяются на 3 категории: Книги, Авторы, Жанры.Каждая категория представлена в виде таблицы с формой для её заполнения. 

#### Для работы приложения исходные файлы разделены по такому принципу:

	Файлы index.js ,  indexAuthor.js и indexGenre.js  связаны с index.html, add_author.html и  add_genre.html соответственно. Каждый файл .js обрабатывает свой .html файл

	♦ index.js — Файл, с которого начинается работа приложения. В нем заключена работа с таблицой и формой для работы с книгами.

	♦ Файлы indexAuthor.js и indexGenre.js аналогично работают с Авторами и Жанрами (соответственно)

	Предполагается, что 1 таблица с 1-й формой обслуживает 1 тип объекта

		♦ Для каждого такого объекта существует отдельный класс в виде файла ".js" (папка "objectsClasses")
			books.js — класс для создания объекта "Книга"
			author.js — класс для создания объекта "Автор"
			genre.js — класс для создания объекта "Жанр"

	♦ myHelperLib.js — вспомагательная библиотека для вспомогательных функций (вместо подключения jQuery)

	##### Файл table.class.js — один из главных файлов в программе, содержит класс "Table", в котором представлены методы и свойства для работы таблицы.

	##### Файл form.class.js — один из главных файлов в программе, содержит класс "Form", в котором представлены методы и свойства для работы формы и её взаимодействии с базой данных (LocalStorage) 
	
	♦ файл стилей src/css/style1.css для придания стилизации.


### РАБОТА ПРИЛОЖЕНИЯ

	При открытии страницы с данными, на событие загрузки окна создаем 2 объекта (1 класса Form и 1 класса Table) -- это главные объекты с которыми в дальнейшем проходят все маннипуляции.

	При помощи метода checkForm объект класса "Form" заполняет необходимые поля ввода по привязке. Далее добавляются наблюдатели при помощи метода класса Table. Класс Table является одновременно и издателем и подписчиком -- это необходимо для работы метода, который обрабатывает нажатия на строку таблицы. Далее заполняется таблица с базы данных. 



методы из "tableWorker.js" берут раннее введенные данные и встравляют их в ячейки таблицы. Для работы таблицы нужно в заголовочной ячейке <th> вставить атрибут "data-object-key-bind" со значением ключа объекта в базе данных.
Также  срабатывает метод, который заполняет поля формы, которые требуют привязки данных из базы данных.

При введении данных в поля ввода и нажатии на кнопку "Добавить" методы из "tableWorker.js" обрабатывают в такой последовательности
1. Проверка валидации
2. Определение типа объекта. Обязательное условие — добавление следующего тега для метаданных в каждую форму:
		<input type="hidden" id="objtype" value="book" data-local-storage-key="Book-Library">
		value — тип объекта, который обрабатывается соответсвующим классом в исходных .js - файлах
Подразумевается, что каждая форма заполняет только 1 объект (объект 1-го типа). Ключ для LocalStorage создается автоматически (значение поля 'value' + строка '-library' )

3. Заполнение объекта. 
4. Проверка на дублированние (проверка осуществляется по полю "id")
5. Очистка введенных полей.
6. Добавление объекта в базу данных.


### СОЗДАНИЕ НОВОЙ ТАБЛИЦЫ

Предполагается, что таблица будет создаваться как отдельный модуль (отдельная html-страница и отдельный файл-обработчик), на который пользователь будет ссылаться с основного файла "index.html"
Для создания новой таблици необходимо:

- Создать новый файл .html в директории src/pages
- Задать ссылку на новый .html с файла index.html
- Создать отдельный файл-обработчик для новой таблицы в папке ./src с именем index<Ваше Название>.js (напр. indexMytable.js)
- создать отдельный клас (что будет представлять таблица) в папке ./src с именем <Ваше Название>.class.js (напр. Mytable.class.js)
- Подключить импорт класса в файле "formHandler.js"
- Создать экземпляр объекта в конструкции switch (currentObject.objtype) (файл "formHandler.js")
-

- Создать форму в html-файле, добавив в форму поле с метаданными <input type="hidden" ...> 
	- Название ключа для массива объектов (в базе данных) устанавливается в атрибут "data-local-storage-key"
	- Тип объекта устанавливается в атрибут "value"
	- Значение атрибута "id" у каждого поля 'input' -- это название свойства объекта в базе данных.
	- Если не нужно, чтобы значение 'value' у поля 'input' попало в заполняемый объект -- необходимо добавить атрибут 'ignore'.
	- В поля формы, которые требуют привязки данных из базы данных, необходимо добавить 2 атрибута:
		- В атрибут "data-local-storage-key-bind" добавить ключ от базы данных (LocalStorage), где хранится массив объектов. 
		- В атрибут "data-object-property-bind" добавить имя свойста у объекта, значение которого будет помещатся в поле ввода (в "option" "select"-а);
	
- Создать саму таблицу в html-файле
	- Каждое свойство объекта создается через <th>. В атрибут "data-object-key-bind" указывается название поля объекта, по которому в данный столбец будут выводится значения.
	- Если есть элементы в форме, значения которых не должно попасть в объект в базу данных -- добавляем в него атрибут 'ignore'

- Создать поле поиска (фильтра).
	Обязательные атрибуты:
		- id="input-search"
		- В атрибуте "data-search-object-property" Указать по какому свойству у объекта будет осуществлятся поиск.



 


